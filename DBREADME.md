# FinDash · База данных

Схема и скрипты PostgreSQL для проекта **FinDash** — дашборда для отслеживания российских облигаций, акций и криптовалют (по аналогии с Т-Инвестиции).

---

## О проекте

FinDash хранит:

- **Пользователей** — учётные записи с логином и хэшем пароля.
- **Избранное** — выбранные пользователем активы: облигации (ОФЗ и др.), акции (SBER, GAZP и др.), криптовалюты (BTC, ETH и др.).
- **Отчёты** — сохранённые отчёты в виде JSON (портфель, сводки и т.п.).

Вся работа с БД в этом репозитории ведётся в ветке **bd**.

---

## Файлы в ветке bd

| Файл        | Назначение |
|-------------|------------|
| `bd.sql`    | Создание таблиц, индексов и тестовых пользователей |
| `SCHEMA.md` | Описание схемы и связей между таблицами |
| `data.sql`  | Примеры данных (избранное и отчёты) |
| `indexes.sql` | Только индексы (для справки или повторного применения) |

---

## Быстрый старт

**Требования:** PostgreSQL 12+

```bash
createdb findash
psql -d findash -f bd.sql
psql -d findash -f data.sql   # опционально — демо-данные
```

---

## Таблицы

| Таблица           | Описание |
|-------------------|----------|
| `users`           | Пользователи: `id`, `login`, `passwordHash`, `createdAt` |
| `user_favorites`  | Избранные активы: привязка к пользователю, тип (`bond` / `stock` / `currency`), тикер |
| `user_reports`    | Отчёты: привязка к пользователю, тип отчёта, данные в JSONB |

Подробная схема, связи и индексы — в [SCHEMA.md](./SCHEMA.md).

---

## Тестовые пользователи

Создаются при выполнении `bd.sql`:

| Логин  | Пароль |
|--------|--------|
| `admin` | `admin` |
| `user`  | `user`  |

Пароли хранятся как SHA256.

---

## Публикация в GitHub

```bash
git checkout bd
git add bd.sql SCHEMA.md README.md data.sql indexes.sql
git commit -m "BD: схема, данные, индексы"
git push origin bd
```
